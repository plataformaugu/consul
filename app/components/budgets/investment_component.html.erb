<div id="<%= dom_id(investment) %>" class="card-component">
  <header>
    <div class="image-container">
      <% if investment.image.present? %>
        <%= image_tag investment.image.variant(:large), alt: investment.image.title.unicode_normalize %>
      <% else %>
        <div class="no-image">
          Sin imagen
        </div>
      <% end %>

      <% if investment.winner %>
        <div class="alert-container">
          <div class="alert-text-container">
            <h4>Ganador</h4>
          </div>
        </div>
      <% end %>
    </div>

    <h4 class="text-center" style="margin-top: 1rem;">
      <%= link_to investment.title, namespaced_budget_investment_path(investment) %>
    </h4>

    <section>
      <%= ActionView::Base.full_sanitizer.sanitize(investment.description.truncate_words(21)) %>
    </section>
  </header>

  <footer>
    <div style="margin-bottom: 1rem;" class="text-center">
      <% if investment.should_show_vote_count? || investment.should_show_price? %>
        <div class="supports-and-price">
          <% if investment.should_show_vote_count? %>
            <span class="supports-title">Votos</span>
            <strong><%= investment.total_votes %></strong>
          <% end %>

          <% if investment.should_show_price? %>
            <span class="price-title"><%= t("budgets.investments_list.investment.price") %></span>
            <strong><%= investment.formatted_price %></strong>
          <% end %>
        </div>
      <% end %>

      <% if current_user %>
        <% if investment.budget.balloting? %>
          <div id="<%= dom_id(investment) %>_ballot" style="margin: 1rem 1rem 0 1rem;">
            <%= render Budgets::Investments::BallotComponent.new(
              investment: investment,
              investment_ids: [investment.id],
              ballot: investment.budget.ballots.where(user: current_user).first_or_create(user: current_user),
              show_price: false
            ) %>
          </div>
        <% end %>
      <% end %>
    </div>
  </footer>
</div>
