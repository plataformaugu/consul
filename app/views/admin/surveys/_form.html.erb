<div class="margin-top">
  <%= form_with(model: [:admin, @survey], local: true) do |form| %>

    <div class="field">
      <%= form.text_field :title, label: 'TÃ­tulo', required: true %>
    </div>

    <div class="field">
      <%= form.datetime_field :start_time, label: 'Fecha de inicio', required: true %>
    </div>

    <div class="field">
      <%= form.datetime_field :end_time, label: 'Fecha de termino', required: true %>
    </div>

    <div class="field">
      <%= form.text_area :body, label: 'Cuerpo', class: 'html-area' %>
    </div>

    <div class="field" style="<%= !current_user.without_organization? ? 'display: none;' : '' %>">
      <label for="survey_organizations" style="margin-bottom: 0.5rem;">Organizaciones</label>

      <% if !@survey.errors.messages[:organizations].empty? %>
        <div style="margin-bottom: 0.5rem">
          <small class="form-error is-visible">
            <%= @survey.errors.messages[:organizations][0] %>
          </small>
        </div>
      <% end %>

      <%= form.collection_check_boxes :organizations, User::ORGANIZATIONS_WITHOUT_OTHER, :to_s, :to_s, include_hidden: false do |group| %>
        <%= group.label do %>
          <%= group.check_box checked: (!current_user.without_organization? && current_user.is_in_organization?(group.text)) || @survey.organizations.include?(group.text) %>
          <%= group.label style: 'font-weight: normal;' %>
        <% end %>
      <% end %>
    </div>

    <%= render Shared::ImageFieldComponent.new(@survey, form) %>

    <div class="actions">
      <% if action_name == 'edit' %>
        <%= form.submit 'Editar encuesta', class: 'button' %>
      <% else %>
        <%= form.submit 'Crear encuesta', class: 'button' %>
      <% end %>
    </div>
  <% end %>
</div>
